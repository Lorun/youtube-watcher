import React, { Component } from 'react';import injectSheet from 'react-jss';import Search from './search';import Player from './player/Player';import History from './history/History';const styles = {  '@global': {    '*': {      boxSizing: 'border-box',    },    body: {      margin: 0,      padding: 0,      color: '#444',    }  },  container: {    padding: 32,  },  main: {    padding: '48px 0 32px',    display: 'flex',  }};class App extends Component {  constructor(props) {    super(props);    const cachedHistory = localStorage.getItem('history');    this.state = {      history: cachedHistory ? JSON.parse(cachedHistory) : [],      currentVideo: null,      autoplay: false,    };    this.handleVideoSelect = this.handleVideoSelect.bind(this);    this.handleVideoSave = this.handleVideoSave.bind(this);    this.handleVideoDelete = this.handleVideoDelete.bind(this);  }  handleVideoSelect(video, autoplay = true) {    this.setState({      currentVideo: video,      autoplay,    });  }  handleVideoSave(id) {    const {      history,      currentVideo,    } = this.state;    const isExist = history.find(item => item.id === currentVideo.id);    if (!isExist) {      this.setState(prevState => {        const history = [          currentVideo,          ...prevState.history,        ];        localStorage.setItem('history', JSON.stringify(history));        return { history };      });    }  }  handleVideoDelete(id) {    const index = this.state.history.findIndex(item => item.id === id);    if (index !== -1) {      this.setState(prevState => {        const history = [          ...prevState.history        ];        history.splice(index, 1);        localStorage.setItem('history', JSON.stringify(history));        return { history };      });    }  }  render() {    const {      history,      currentVideo,      autoplay,    } = this.state;    const classes = this.props.classes;    return (      <div className={classes.container}>        <Search          onSelect={this.handleVideoSelect}        />        <div className={classes.main}>          <History            list={history}            onPlay={this.handleVideoSelect}            onDelete={this.handleVideoDelete}          />          <Player            video={currentVideo}            autoplay={autoplay}            addToHistory={this.handleVideoSave}          />        </div>      </div>    );  }}export default injectSheet(styles)(App);